{% extends "AdminBundle::Layout/adminlayout.html.twig" %}

{% set state = '' %}

{% block title %}FAQ Type List{% endblock %}
{% block css %}
	 <link href="{{asset('bundles/design/')}}css/select2.min.css" rel="stylesheet" type="text/css" />
	 <link href="{{asset('bundles/design/')}}css/dataTables.bootstrap.css" rel="stylesheet" type="text/css" />
	 <link href="{{asset('bundles/design/')}}css/bootstrap-toggle.min.css" rel="stylesheet" type="text/css" />
{% endblock %}
{% block content %}
<!----------- PAGE HEADER : START ----------------------------------------------------------->
	<section class="content-header">
	<!-------- PAGE TITLE --------------->
		<h1>
	
		  <small></small>
		</h1>
	<!------- BREADCUMB --------------------->
		<ol class="breadcrumb">
		  <li><a href="{{path('admin_dashboard_index',{'domain':app.session.get('domain')})}}"><i class="fa fa-dashboard"></i> Dashboard</a></li>
		  <li class="active">FAQ Type</li>
		</ol>
	</section>
<!----------- PAGE HEADER : END ----------------------------------------------------------->
<!----------- Main content : START ----------------------------------------------------------->
	<section class="content">
		{% for flashMessage in app.session.flashbag.get('success_msg') %}
		<div class="alert alert-success alert-dismissable">
			<button aria-hidden="true" data-dismiss="alert" class="close" type="button">×</button>
			<h4><i class="icon fa fa-check"></i> Alert!</h4>{{ flashMessage }}
		</div>
        {% endfor %}
        {% for flashMessage in app.session.flashbag.get('error_msg') %}
		<div class="alert alert-danger alert-dismissable">
			<button aria-hidden="true" data-dismiss="alert" class="close" type="button">×</button>
			<h4><i class="icon fa fa-check"></i> Alert!</h4>{{ flashMessage }}
		</div>
		{% endfor %}
		<div class="row">
            <div class="col-xs-12">
				<div class="box box-primary">
                <div class="box-header with-border">
				<h3 class="box-title">FAQ Type List</h3>
				<div class="box-tools pull-right">
				  {% if state=='' %}
				  <a href="{{path('admin_faq_addfaqtype',{'domain':app.session.get('domain')})}}" class="btn btn-primary btn-flat" title="Add"><i class="fa fa-plus"></i><b>&nbsp;&nbsp;Add FAQ Type</b></a>
				{% endif %}
				</div>
                </div><!-- /.box-header -->
                
				<div class="box-body">
                  <table id="example1" class="table table-bordered table-striped text-center">
                    <thead>
                      <tr>
                        <th>No.</th>
						<th>FAQ Type Name</th>
						
					<th>Status</th>
                        <th>Action</th>
                      </tr>
                    </thead>
                    <tbody>
                      {% if faqtlists is defined and faqtlists is not empty %}
                        {% for faqtlist in faqtlists %}
                          <tr>
                            <td>{{loop.index}}</td>
							 <td>
								{% if faqtlist.faq_type_name is defined and faqtlist.faq_type_name is not empty %}
									{{faqtlist.faq_type_name}}
								{% endif %}
							 </td>
                           
							
							 <td>
                {% if faqtlist.status == 'active' %}
                {{"Active"}}
                {% else %}
                {{"Inactive"}}
                {% endif %}
							{#{% if faqtlist.status == 'active' %}
								{% set chk = "checked" %}
							{% else %}
								{% set chk = "" %}
							{% endif %}
							 <input data-on="Active" {{state}} onchange="change_sts({{faqtlist.main_faq_type_id}})" data-off="Inactive" type="checkbox" data-toggle="toggle" {{chk}} data-size="mini" data-onstyle="success" value="{{faqtlist.main_faq_type_id}}" />#}
						  </td>
							 
                            <td>
							  {% if faqtlist.faq_type_id	 is defined and faqtlist.faq_type_id	 is not empty %}
                                <a onclick="return confirm('Are you sure you want to Edit?')"
                                   href="{{path('admin_faq_addfaqtype',{'domain':app.session.get('domain')})}}/{{faqtlist.main_faq_type_id	}}"
                                   class="btn btn-info btn-xs" data-toggle="tooltip" title="">
                                    <i class="fa fa-edit"></i>
                                </a>
								{% if state=='' %}
                                <a onclick="return confirm('Are you sure you want to Delete?')"
                                   href="{{path('admin_faq_deletefaqtype',{'domain':app.session.get('domain')})}}/{{faqtlist.main_faq_type_id	}}"
                                   class="btn btn-danger btn-xs" data-toggle="tooltip" title="Delete">
                                    <i class="fa fa-close"></i>
                                </a>
                             {% endif %}
                                {% endif %}
                            </td>
                          </tr>
                        {% endfor %}                              
                            {% endif %}
                    </tbody>
                    <tfoot>
                      <tr>
                        <th>No.</th>
                        
						<th>FAQ Type Name</th>
						
						<th>Status</th>
                        <th>Action</th>
                      </tr>
                    </tfoot>
                  </table>
                </div>


           
          </div><!-- /.box -->

			  
	</section>
<!----------- Main content : END ---------------------------------------------------------->
{% endblock %}
{% block js %}

<script type="text/javascript">
	$(function () {
	  var table = $('#example1').DataTable( {
        dom: 'Bfrtip',
    
        buttons: [
            {
                extend: 'copyHtml5',        
                exportOptions: {
                 columns: ':not(:last-child)',
                },
                
            },
          {
                extend: 'pdfHtml5',
                orientation:'landscape',  
                customize: function (doc) {
            doc.content[1].table.widths = 
              Array(doc.content[1].table.body[0].length + 1).join('*').split('');
          },      
                exportOptions: {
                columns: ':not(:last-child)',
             },
            },
            {
               extend: 'excelHtml5',
                      exportOptions: {
                       columns: ':not(:last-child)',
                      },
            },
            {
               extend: 'csvHtml5',
                      exportOptions: {
                       columns: ':not(:last-child)',
                      },
            },
            {
                      extend: 'print',        
                      exportOptions: {
                       columns: ':not(:last-child)',
                          format: {
            body: function(data, col, row) {            
              if (col == 2) {
                return table
                    .cell( {row: row, column: col} )
                    .nodes()
                    .to$()
                    .find(':checked')
                    .text()
              } else {
                return data;
              }
            }
          },
                      },
                      
                  },
              ],
            columnDefs: [
            { targets:[3], orderable: false }
            ],
    } );
	});
</script>

<script>
       
function change_sts(val)
{
	 var faq_id = val;
	//alert(faq_id);
	 $.ajax({
			type: 'POST',
			url : "{{path('admin_faq_changestatusfaqtype',{'domain':app.session.get('domain')})}}",
			data: {"faq_id":faq_id,"flag":"change_status"},
			dataType: 'json',
			success: function(response){
				//console.log(response);
				//location.reload();
			}
		});
}
</script>


{% endblock %}