{% extends "AdminBundle::Layout/adminlayout.html.twig" %}
{% block title %}Add - Update Shop{% endblock %}
{% block css %}
	<link href="{{asset('bundles/design/')}}css/select2.min.css" rel="stylesheet" type="text/css" />
	<link href="{{asset('bundles/design/')}}css/dataTables.bootstrap.css" rel="stylesheet" type="text/css" />
	<link href="{{asset('bundles/design/')}}css/bootstrap-toggle.min.css" rel="stylesheet" type="text/css" />
	<link href="{{asset('bundles/design/')}}css/datepicker3.css" rel="stylesheet" type="text/css" />
	<link href="{{asset('bundles/design/')}}css/bootstrap-timepicker.min.css" rel="stylesheet" type="text/css" />
 <style type="text/css">
	.save-btn, .cancel-btn {
    width: 85%;
}
.m-left
{
	margin-left:-6%;
}

@media only screen and (max-width: 500px) {
	.m-left{
		margin-left: 0;
	}
	.shipp1
	{
		margin-left: 15px;
	}
	.shipp2
	{
		width: 93%; margin-left: 15px;
	}
}
</style>
<style>
        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
        }
</style>

{% endblock %}
{% block content %}
{% set state = '' %}
{% set is_disable = 'disable' %}
{% if app.session.get('role_id') != 1 and app.session.get('role_id') != 2 %}
  {% set state = 'readonly' %}
{% endif %}
{% set state = '' %}

   <div class="se-pre-con"></div>
<!----------- PAGE HEADER : START ----------------------------------------------------------->
	<section class="content-header">
	<!-------- PAGE TITLE --------------->
		<h1>
		  Shop
		  <small></small>
		</h1>
	<!------- BREADCUMB --------------------->
		<ol class="breadcrumb">
		  <li><a href="{{path('admin_dashboard_index')}}"><i class="fa fa-dashboard"></i> Dashboard</a></li>

		  <li>Shop</li>
		  <li class="active">{% if app.session.get('user_role_id') == "2" %}View{%else%}Add - Update{%endif%} Shop</li>
		</ol>
	</section>
<!----------- PAGE HEADER : END ----------------------------------------------------------->
<!----------- Main content : START ----------------------------------------------------------->
	<section class="content">
		{% for flashMessage in app.session.flashbag.get('success_msg') %}
		<div class="alert alert-success alert-dismissable">
			<button aria-hidden="true" data-dismiss="alert" class="close" type="button">×</button>
			<h4><i class="icon fa fa-check"></i> Alert!</h4>{{ flashMessage }}
		</div>
        {% endfor %}
        {% for flashMessage in app.session.flashbag.get('error_msg') %}
		<div class="alert alert-danger alert-dismissable">
			<button aria-hidden="true" data-dismiss="alert" class="close" type="button">×</button>
			<h4><i class="icon fa fa-check"></i> Alert!</h4>{{ flashMessage }}
		</div>
		{% endfor %}
		<div class="row">
		 <style>
			img{
			   padding-top: 10px;
			   max-width: 70%;
			}
		 </style>


            <div class="col-xs-12">
				<div class="box box-primary">
                <div class="box-header with-border">
                  <h3 class="box-title">{% if app.session.get('user_role_id') == "2" %}View{%else%}Add - Update{%endif%} Shop</h3>
				   <a href="{{path('admin_shop_shoplist')}}" class="btn btn-primary btn-flat pull-right"><i class="glyphicon glyphicon-chevron-left"></i><b>&nbsp;&nbsp;Back</b></a>
                </div><!-- /.box-header -->

				<div class="box-body">


                        <form method="post" enctype="multipart/form-data" action="{{path('admin_shop_addshopdb')}}">

                            {% if shop_master_id is defined %}
                                <input type="hidden" name="shop_master_id" {{state}} value="{{shop_master_id}}"/>
                            {% endif %}
							<div class="row form-group">
							  <div class="col-md-2 col-sm-2 col-xs-12"><!-- col-lg-2-->
								 <label>Shop Name</label>
							  </div>
							  <div class="col-md-10 col-sm-10 col-xs-12 m-left"><!-- col-lg-10-->
								 <input type="text" name="shop_name" class="form-control"  {{state}}
                                        {% if shop is defined and shop is not empty %}
                                                value="{{shop[0].shop_name}}"
                                    {% endif %} required/>
							  </div>
							</div>

							<div class="row form-group">
							  <div class="col-md-2 col-sm-2 col-xs-12"><!-- col-lg-2-->
								 <label>Shop Detail</label>
							  </div>
							  <div class="col-md-10 col-sm-10 col-xs-12 m-left"><!-- col-lg-10-->
								 <textarea class="form-control" {{state}} name="shop_detail">{% if shop is defined and shop is not empty %}{{shop[0].shop_detail}}{% endif %}</textarea>
							  </div>
							</div>


					{#	 <div class="row form-group">
                                <div class="col-lg-2">
                                    <label>Status</label>
                                </div>
                                <div class="col-lg-10">
                                    <label class="radio-inline">
                                        <input type="radio" name="status" required="" value="open"  {{state}}
                                        {% if shop is defined and shop is not empty %}
                                                    {% if shop[0].status == 'open' %}
                                                        checked="checked"
                                                    {% endif %}
                                        {% endif %} /> Open
                                    </label>
									<label class="radio-inline">
                                        <input type="radio" name="status" required="" value="busy"  {{state}}
                                        {% if shop is defined and shop is not empty %}
                                                    {% if shop[0].status == 'busy' %}
                                                        checked="checked"
                                                    {% endif %}
                                        {% endif %} /> Busy
                                    </label>
									<label class="radio-inline">
                                        <input type="radio" name="status" required="" value="closed"  {{state}}
                                        {% if shop is defined and shop is not empty %}
                                                    {% if shop[0].status == 'closed' %}
                                                        checked="checked"
                                                    {% endif %}
                                        {% endif %} /> Closed
                                    </label>
									{% if app.session.get('user_role_id') != "1" %}
                                    <label class="radio-inline">
                                        <input type="radio" name="status" required="" value="inactive"  {{state}}
                                        {% if shop is defined and shop is not empty %}
                                                    {% if shop[0].status == 'inactive' %}
                                                        checked="checked"
                                                    {% endif %}
                                        {% endif %} /> Inactive
                                    </label>
								 {% endif %}
                                </div>
                            </div>
							 #}
							 <div class="row form-group">
                                <div class="col-md-2 col-sm-2 col-xs-12">
                                    <label>Shop Logo</label>
                                </div>

                               <div class="col-md-10 col-sm-10 col-xs-12 m-left">
                                    <input type="file" name="ol" class="form-control"  {{state}}
										     {% if shop is not defined or shop is empty %}
												required=""
											 {% endif %}
										   />
                                    {% if shop is defined and shop is not empty %}

												<img width="200" src="{{live_path}}/{{shop[0].ol}}" class="display-image img-responsive" onload="$(this).prev().removeAttr('required');  {{state}} "/>
                                    {% endif %}
                                </div>
                            </div>

							 {# <div class="row form-group">
							 <label class="col-sm-2 control-label">Start Time</label>
                            <div class="col-sm-4 bootstrap-timepicker">
                               <input type="text"  {{state}}  value="{% if shop is defined and shop is not empty %}{{shop[0].start_time}}{% endif %}" class="form-control timepicker1" name="time_slot1">
                            </div>
							<label class="col-sm-2 control-label">End Time</label>
							<div class="col-sm-4 bootstrap-timepicker">
                               <input type="text" {{state}}  value="{% if shop is defined and shop is not empty %}{{shop[0].end_time}}{% endif %}" class="form-control timepicker2" name="time_slot2">
                            </div>
							 </div>
							 #}
							 <div class="row form-group">
							  <div class="col-md-2 col-sm-2 col-xs-2">
								 <label>Website Link</label>
							  </div>
							  <div class="col-md-4 col-sm-4 col-xs-12 m-left">
								 <input type="text"  {{state}} name="website_link" class="form-control"
                                        {% if shop is defined and shop is not empty %}
                                                value="{{shop[0].website_link}}"
                                    {% endif %}/>
							  </div>


							  {#
							  <div class="row form-group">
							  <div class="col-sm-2">
								 <label>Subscription Type</label>
							  </div>

							  <div class="col-sm-4">
								 <input type="radio" name="package_type" id="package_type" value="dispatch_only" {{state}} {% if shop is defined and shop is not empty %}{% if shop[0].is_dispatch_only == 1 %}checked{% endif %}{% else %}checked{% endif %} required/> Dispatch Only<br />
								 <input type="radio" name="package_type" id="package_type" value="car_on_request" {{state}} {% if shop is defined and shop is not empty %}{% if shop[0].is_car_on_request == 1 %}checked{% endif %}{% endif %} required/> Car on Request
							  </div>
							#}

							{#  <div class="col-sm-2">
								 <label>Delivery Time</label>
							  </div>
							  <div class="col-sm-4">
								 <input type="text"  {{state}} name="delivery_time" id="delivery_time" class="form-control" placeholder="e.g 45 Mins" required=""
                                        {% if shop is defined and shop is not empty %}
                                                value="{{shop[0].delivery_time}}"
                                    {% endif %} />
							  </div>

							</div>
							  #}
							 <div class="row form-group">
							  <div class="col-md-2 col-xs-12 shipp1" >
								 <label>Shipping Charge</label>
							  </div>
							  <div class="col-md-4 col-sm-4  col-xs-12 m-left shipp2">
								<input type="number"  {{state}} name="shipping_charge" id="shipping_charge" class="form-control"  required="" min="0" step="0.001"
                                        {% if shop is defined and shop is not empty %}
                                                value="{{shop[0].shipping_charge}}"{% else %}value="0"
                                    {% endif %} />
							  </div>
							 </div>

							</div>
							<div class="row form-group">
                                <div class="col-md-2 col-sm-2 col-xs-12">
                                    <label>Shop Type</label>
                                </div>
                               <div class="col-md-10 col-sm-10 col-xs-12 m-left">
                                    <label class="radio-inline">
                                        <input type="radio" {{state}}  name="shop_type" required="" value="pharmacy"
                                        {% if shop is defined and shop is not empty %}
                                                    {% if shop[0].shop_type == 'pharmacy' %}
                                                        checked="checked"
                                                    {% endif %}
                                        {% endif %} /> Pharmacy
                                    </label>
                                    <label class="radio-inline">
                                        <input type="radio" {{state}}  name="shop_type" required="" value="food_supplement"
                                        {% if shop is defined and shop is not empty %}
                                                    {% if shop[0].shop_type == 'food_supplement' %}
                                                        checked="checked"
                                                    {% endif %}
                                        {% endif %} /> Food Supplement
                                    </label>
                                </div>
                            </div>


						    <hr />




								 	<div class="box-header">
									   <h3 class="box-title">Admin For Shop</h3><hr />
									</div>

									<div class="box-body">

									   {% if user_master_id is defined %}
                                <input type="hidden" name="user_master_id" value="{{user_master_id}}"/>
                            {% endif %}


							<div class="row form-group">
							  <div class="col-md-2 col-sm-2 col-xs-12">
								 <label>First Name</label>
							  </div>
							  <div class="col-md-4 col-sm-4 col-xs-12 m-left">
								 <input type="text"  {{state}} name="user_firstname" class="form-control"
                                        {% if users is defined and users is not empty %}
                                                value="{{users[0].user_firstname}}"
                                    {% endif %}/>
							  </div>
							  <div class="col-md-2 col-sm-2 col-xs-12">
								 <label>Last Name</label>
							  </div>
							  <div class="col-md-4 col-sm-4 col-xs-12 m-left">
								 <input type="text"  {{state}} name="user_lastname" class="form-control"
                                        {% if users is defined and users is not empty %}
                                                value="{{users[0].user_lastname}}"
                                    {% endif %}/>
							  </div>
							</div>

							<div class="row form-group">
                                <div class="col-md-2 col-sm-2 col-xs-12">
                                    <label>Email</label>
                                </div>
                                <div class="col-md-10 col-sm-10 col-xs-12 m-left">
                                    <input type="user_emailid"  {{state}} class="form-control" name="user_emailid" placeholder="Your Email Address" required="" value="{% if users is defined and users is not empty %}{{users[0].user_emailid}}{% endif %}"  pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$"  />
                                </div>
                            </div>

							  <div class="row form-group">
                                <div class="col-md-2 col-sm-2 col-xs-12">
                                    <label>User Name</label>
                                </div>
                                <div class="col-md-10 col-sm-10 col-xs-12 m-left">
                                    <input type="text"  {{state}} class="form-control" name="username" placeholder="Your User Name" required="" value="{% if users is defined and users is not empty %}{{users[0].username}}{% endif %}"/>
                                </div>
                            </div>


							<div class="row form-group">
                                <div class="col-md-2 col-sm-2 col-xs-12">
                                    <label>Password</label>
                                </div>
                                <div class="col-md-10 col-sm-10 col-xs-12 m-left">
                                    <input type="password"  {{state}} class="form-control" {% if users is defined and users is not empty %}{% else %}required=""{% endif %} name="password"/><b>Note : </b>Leave the text area blank, if you do not wish to change the password.
                                </div>
                            </div>



							<div class="row form-group">
							  <div class="col-md-2 col-sm-2 col-xs-12">
								 <label>Address</label>
							  </div>
							  <div class="col-md-10 col-sm-10 col-xs-12 m-left">
								 <textarea class="form-control" {{state}}  name="address">{% if address is defined and address is not empty %}{{address[0].address_name}}{% endif %}</textarea>
							  </div>
							</div>

							<input type="hidden" name="city" id="city" value="3" />

							<div class="row form-group">
							{#  <div class="col-lg-2">
								 <label>City</label>
							  </div>
							  <div class="col-lg-4">
								 <select class="form-control" {{state}}  name="city" id="city" required="">
							  <option value="">-- select city --</option>

							  {% if citymaster is defined and citymaster is not empty %}
								 {% for city in citymaster %}
								  <option value="{{city.main_city_id}}" {% if single_city is defined and single_city is not empty %}{% if single_city[0].main_city_id == city.main_city_id %}selected{% endif %}{% endif %}>{{city.city_name}} {% if  city is defined %} / {{city.city_name}} {% endif %}</option>
								  {% endfor %}
							  {% endif %}
						  </select>
							  </div>#}
							  <div class="col-md-2 col-sm-2 col-xs-12">
								 <label>Area</label>
							  </div>
							  <div class="col-md-4 col-sm-4 col-xs-12 m-left">
								 <select class="form-control" {{state}}  name="area" id="area">
									<option value="">-- select Area --</option>
							  {% if areamaster is defined and areamaster is not empty %}
								 {% for area in areamaster %}
								  <option value="{{area.main_area_id}}" {% if single_area is defined and single_area is not empty %}{% if single_area[0].main_area_id == area.main_area_id %}selected{% endif %}{% endif %}>{{area.area_name}} {% if  area is defined %} / {{area.area_name}} {% endif %}</option>
								  {% endfor %}
							  {% endif %}
						  </select>
							  </div>
							</div>


					<div class="row form-group">

							  <div class="col-md-2 col-sm-2 col-xs-12">
								 <label>Mobile</label>
							  </div>
							  <div class="col-md-4 col-sm-4 col-xs-12 m-left">
								 <input type="number"  {{state}} name="user_mobile" maxlength="8" size="8" class="form-control" required="" maxlength="10" min="0"
                                        {% if users is defined and users is not empty %}
                                                value="{{users[0].user_mobile}}"
                                    {% endif %}/>
							  </div>
							</div>


                            <div class="row form-group">
                                <div class="col-md-2 col-sm-2 col-xs-12">
                                    <label>Status</label>
                                </div>
                                <div class="col-md-10 col-sm-10 col-xs-12 m-left">
                                    <label class="radio-inline">
                                        <input type="radio" {{state}}  name="user_status" required="" value="Active"
                                        {% if users is defined and users is not empty %}
                                                    {% if users[0].user_status == 'active' %}
                                                        checked="checked"
                                                    {% endif %}
                                        {% endif %} /> Active
                                    </label>
                                    <label class="radio-inline">
                                        <input type="radio" {{state}}  name="user_status" required="" value="Inactive"
                                        {% if users is defined and users is not empty %}
                                                    {% if users[0].user_status == 'inactive' %}
                                                        checked="checked"
                                                    {% endif %}
                                        {% endif %} /> Inactive
                                    </label>
                                </div>
                            </div>


									</div>




                            <hr />
                            <div class="row" align="center">
                                <div class="col-lg-10 col-lg-offset-1">


                                    <div class="col-md-6 col-xs-6">
                                        <button type="submit" class="btn btn-primary save-btn" name="add">Save</button>
                                    </div>


                                    <div class="col-md-6 col-xs-6">
									    <a href="{{path('admin_shop_shoplist')}}" class="btn btn-default cancel-btn">Cancel</a>
                                    </div>

                                </div>
                            </div>

                        </form>

            </div>



          </div><!-- /.box -->


	</section>
<!----------- Main content : END ---------------------------------------------------------->
{% endblock %}
{% block js %}



<script src="{{asset('bundles/design/')}}js/bootstrap-toggle.min.js" type="text/javascript"></script>
<script src="{{asset('bundles/design/')}}js/jquery.dataTables.min.js" type="text/javascript"></script>
<script src="{{asset('bundles/design/')}}js/dataTables.bootstrap.min.js" type="text/javascript"></script>
<script src="{{asset('bundles/design/')}}js/bootstrap-datepicker.js" type="text/javascript"></script>
<script src="{{asset('bundles/design/')}}js/bootstrap-timepicker.min.js" type="text/javascript"></script>


<script type="text/javascript">
	$(function () {
	  $("#example1").DataTable();
	});
</script>

<script>

   $(document).ready(function(){
		$(".datepicker").datepicker({
			"setDate": new Date(),
	        "autoclose": true
		});
		//Timepicker
		$(".timepicker1").timepicker({
		  showInputs: false,
		  showMeridian: false
		});
		$(".timepicker2").timepicker({
		  showInputs: false,
		  showMeridian: false
		});
   });


</script>

<script>
/*$(document).ready(function(){
       //  $("#city").change(function()
		// {

		 var city_master_id=3;
		 var dropdown=$('#area');
		 $(".se-pre-con").css("display","block");
		 dropdown.empty();
		  if (city_master_id!="") {

				$.ajax
				 ({
					type: "POST",
					url: "{{path('admin_shop_areaajax')}}",
					data: 'city_master_id='+city_master_id+"&flag=change_area",
					cache: false,
					success: function(response)
					{
						response = JSON.parse(response)
						//console.log(item);
						dropdown.empty();
						dropdown .append('<option value="">-- select Area --</option>');
						$.each(response, function (index, item) {
						dropdown.append(
							$('<option>', {
								value: item.area_master_id,
								text: item.area_name
							}, '<option/>'))
						  }
						 )
					}
				});
		}
		$(".se-pre-con").fadeOut("slow");
//	});
});
*/
</script>
{% endblock %}
