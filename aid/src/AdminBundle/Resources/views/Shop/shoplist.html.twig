{% extends "AdminBundle::Layout/adminlayout.html.twig" %}
{% block title %} Shop List {% endblock %}
{% block css %}
	 <link href="{{asset('bundles/design/')}}css/select2.min.css" rel="stylesheet" type="text/css" />
	 <link href="{{asset('bundles/design/')}}css/dataTables.bootstrap.css" rel="stylesheet" type="text/css" />
	 <link href="{{asset('bundles/design/')}}css/bootstrap-toggle.min.css" rel="stylesheet" type="text/css" />
{% endblock %}
{% block content %}
<!----------- PAGE HEADER : START ----------------------------------------------------------->
	<section class="content-header">
	<!-------- PAGE TITLE --------------->
		<h1>

		  <small></small>
		</h1>
	<!------- BREADCUMB --------------------->
		<ol class="breadcrumb">
		  <li><a href="{{path('admin_dashboard_index')}}"><i class="fa fa-dashboard"></i> Dashboard</a></li>
		  <li class="active">Shop</li>
		</ol>
	</section>
<!----------- PAGE HEADER : END ----------------------------------------------------------->
<!----------- Main content : START ----------------------------------------------------------->
	<section class="content">
		{% for flashMessage in app.session.flashbag.get('success_msg') %}
		<div class="alert alert-success alert-dismissable">
			<button aria-hidden="true" data-dismiss="alert" class="close" type="button">×</button>
			<h4><i class="icon fa fa-check"></i> Alert!</h4>{{ flashMessage }}
		</div>
        {% endfor %}
        {% for flashMessage in app.session.flashbag.get('error_msg') %}
		<div class="alert alert-danger alert-dismissable">
			<button aria-hidden="true" data-dismiss="alert" class="close" type="button">×</button>
			<h4><i class="icon fa fa-check"></i> Alert!</h4>{{ flashMessage }}
		</div>
		{% endfor %}
		<div class="row">
            <div class="col-xs-12">
				<div class="box box-primary">
                <div class="box-header with-border">
				<h3 class="box-title">Shop List</h3>
				{% if app.session.get('role_id') == 1 or app.session.get('role_id') == 2 %}
				<div class="pull-right">
				<!-- Not providing user creation as of now it will be complete from app only -->
				  <a href="{{path('admin_shop_addshop')}}" class="btn btn-primary btn-flat"><i class="fa fa-plus"></i><b>&nbsp;&nbsp;Add Shop</b></a>
				</div>
				{% endif %}

                </div><!-- /.box-header -->

				<div class="box-body">
                  <table  id="example1"   class="table table-bordered table-striped text-center">
                    <thead>
                      <tr>
                        <th>No.</th>
                        <th>Shop Name</th>
						<th>Shop User Name</th>
						<th>Shop Type</th>
						<th>Email Address</th>

                        <th>Action</th>
                      </tr>
                    </thead>
                    <tbody>
                      {% if shoplist is defined and shoplist is not empty %}
                        {% for cat in shoplist %}
                          <tr>
                            <td>{{loop.index}}</td>
                                <td>{{cat.shop_name}}</td>
								<td>{{cat.user_firstname}}&nbsp;&nbsp;{{cat.user_lastname}}</td>
								<td>{{cat.shop_type}}</td>
								<td>{{cat.user_emailid}}</td>

                            <td>


								 <a onclick="return confirm('Are you sure you want to Edit?')"
                                   href="{{path('admin_shop_addshop')}}/{{cat.shop_master_id}}"
                                   class="btn btn-info btn-xs" data-toggle="tooltip" title="{% if app.session.get('role_id') == 1 or app.session.get('role_id') == 2 %}Edit{% else %}View{% endif %}">
                                    <i class="fa fa-edit"></i>
                                </a>
{% if app.session.get('role_id') == 1 or app.session.get('role_id') == 2 %}
                                <a onclick="return confirm('Are you sure you want to Delete Shop?')"
                                   href="{{path('admin_shop_deleteshop')}}/{{cat.shop_master_id}}"
                                   class="btn btn-danger btn-xs" data-toggle="tooltip" title="Delete">
                                    <i class="fa fa-close"></i>
                                </a>

{% endif %}
                            </td>
                          </tr>
                        {% endfor %}
                            {% endif %}
                    </tbody>
                    <tfoot>
                      <tr>
                        <th>No.</th>
                        <th>Shop Name</th>
						<th>Shop User Name</th>
						<th>Shop Type</th>
						<th>Email Address</th>

                        <th>Action</th>
                      </tr>
                    </tfoot>
                  </table>
                </div>



          </div><!-- /.box -->


	</section>
<!----------- Main content : END ---------------------------------------------------------->
{% endblock %}
{% block js %}

<script type="text/javascript">
	$(function () {
	 	 $('#example1').DataTable( {
        dom: 'Bfrtip',

        buttons: [
            {
                extend: 'copyHtml5',
                exportOptions: {
                 columns: ':not(:last-child)',

                },

            },
			{
				extend: 'pdfHtml5',
                orientation:'landscape',
                customize: function (doc) {
    				doc.content[1].table.widths =
        			Array(doc.content[1].table.body[0].length + 1).join('*').split('');
  				},

				exportOptions: {
				  columns: ':not(:last-child)',

			 }
			},
			{
				 extend: 'excelHtml5',
                exportOptions: {
                 columns: ':not(:last-child)',

                },
			},
			{
				 extend: 'csvHtml5',
                exportOptions: {
                 columns: ':not(:last-child)',

                },
			},
			{
                extend: 'print',
                exportOptions: {
                 columns: ':not(:last-child)',

                },

            },
        ],
        columnDefs: [
  			{ targets:[5], orderable: false }
		],
    } );
	});
</script>




{% endblock %}
